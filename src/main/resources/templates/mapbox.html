
<!DOCTYPE html>
<html xmlns:th="http://www.springframework.org/schema/mvc">
<head>
    <meta charset='utf-8' />
    <title>Display driving directions</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.3.1/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.3.1/mapbox-gl.css' rel='stylesheet' />
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:60%; margin:auto }
    </style>
</head>
<body>

<script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.0.2/mapbox-gl-directions.js'></script>
<link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.0.2/mapbox-gl-directions.css' type='text/css' />
<div id='map'></div>

<script>
    var mapboxToken = 'pk.eyJ1IjoiZmFpeXRlZCIsImEiOiJjanhhdmhwbnkxMWM5M25ucnFka21xOXRzIn0.c_ImXwEydAQDNZH9nhk20A'
    mapboxgl.accessToken = mapboxToken;
    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v11',
        center: [-98.491142, 29.424349],
        zoom: 11
    });
    var texasDeBrazil= {
        name:"Texas De Brazil",
        address: "313 E Houston St, San Antonio, TX 78205",
        popupHTML: "<p>Best Brazilian Grill Place</p>"
    };
    var kimura={
        name:"Kimura",
        address:"152 E Pecan St, San Antonio, TX 78205",
        popupHTML:"<p>Great Ramen!</p>"
    };
    var zincBistro={
        name:"Zinc Bistro",
        address:"207 N Presa St, San Antonio, TX 78205",
        popupHTML:"<p>Great Place to Hang Out</p>"
    };
    function placeMarkerAndPopup(info, mapboxToken, map) {
        geocode(info.address, mapboxToken).then(function(coordinates) {

            var popup = new mapboxgl.Popup({closeButton: true})
                .setHTML(info.popupHTML)
                .setLngLat(coordinates);
            var marker = new mapboxgl.Marker()
                .setLngLat(coordinates)
                .addTo(map)
                .setPopup(popup);
            popup.addTo(map);
        });
    }
    var arrayOfRestaurants = [texasDeBrazil,kimura,zincBistro];
    arrayOfRestaurants.forEach(function(names){
        console.log(names);
        placeMarkerAndPopup(names, mapboxToken, map);
    });




</script>
<script th:inline="javascript">
    /*<![CDATA[*/

    var address = /*[[${user.address}]]*/ 'default';
    console.log(address);

    /*]]>*/
</script>

</body>
</html>